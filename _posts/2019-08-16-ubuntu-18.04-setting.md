---
layout: post
title: "ubuntu 18.04 server setting"
author: "Eren"
tags: setting
---

Mondeiqueì˜ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ì“°ê¸° ì‹œì‘í•  ë•Œ ì–´ë–¤ ê¸€ì´ ì²« ê¸€ì´ ë˜ì–´ì•¼ í• ê¹Œë¼ëŠ” ê³ ë¯¼ì„ í–ˆìŠµë‹ˆë‹¤. ì—„ì²­ë‚œ ê³ ë¯¼ ëì— ubuntu 18.04 ë¥¼ ì„¤ì¹˜í–ˆì„ ë•Œ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ì¼ì¸ `server setting` ì— ëŒ€í•´ì„œ ì„œìˆ í•´ë³´ì! ë¼ëŠ” ë§ˆìŒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ë¹„ê°œë°œìì˜ ê²½ìš° `ubuntu` ë¼ëŠ” OSì— ìµìˆ™í•˜ì§€ ì•Šê¸°ì— ì´ ê¸€ì´ ë„ì›€ì´ ë§ì´ ë  ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ubuntu settingì€ ì•„ë˜ì˜ ìˆœì„œë¡œ ì§„í–‰ë˜ë©° mondeique ubuntu server ì˜ ê´€ë¦¬ìë“¤ì€ ëª¨ë‘ ìˆ™ì§€í•˜ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤,

1. Basic Package Installation 
2. default user setting: `sudo passwd root`ë¡œ su ë¹„ë°€ë²ˆí˜¸ ì„¤ì • 
3. Nvidia Driver Installation
4. CUDA, cudnn Installation 
5. Anaconda 3 Installation 
6. ubuntu static IP setting
7. openssh Installation + port setting 
8. ufw (ubuntu firewall) setting 
9. sudo adduser ë° admin permission setting 
<hr>
<br>
## Basic Package Installation 

ì œì¼ ë¨¼ì € ê¸°ë³¸ì ì¸ package ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. 
{% highlight bash %}
$ sudo apt-get update
$ sudo apt-get install vim 
$ sudo apt-get install curl 
{% endhighlight %}

ì¶”ê°€ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ê¹”ì•„ì•¼ í•˜ëŠ” package ê°€ ìˆë‹¤ë©´ `sudo apt-get install` command ë¥¼ ì´ìš©í•´ ì„¤ì¹˜í•˜ì‹œë©´ ë©ë‹ˆë‹¤. 

## default user setting 

ì²˜ìŒì—ëŠ” `root` ê³„ì •ë°–ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë° ì´ ë£¨íŠ¸ ê³„ì •ì— ê´€í•œ ê¸°ë³¸ì ì¸ default setting ì´ í•„ìš”í•©ë‹ˆë‹¤. 
{% highlight bash %}
$ sudo passwd root
Enter new UNIX passwordt:
Retype new UNIX password:
passwd: password updated successfully
{% endhighlight %}

root ê³„ì •ì˜ ì•”í˜¸ë¥¼ ì„¤ì •í•˜ì˜€ìœ¼ë‹ˆ, ì¼ë°˜ ì‚¬ìš©ì ê³„ì •ì—ì„œ root ê³„ì •ìœ¼ë¡œ ë³€í™˜í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤, Ubuntu ê¸°ì¤€ìœ¼ë¡œ í„°ë¯¸ë„ ì°½ì— ìˆëŠ” `$` í‘œì‹œëŠ” í˜„ì¬ í„°ë¯¸ë„ì— ì ‘ì† ì¤‘ì¸ ì¼ë°˜ ì‚¬ìš©ìë¥¼ ë‚˜íƒ€ë‚´ë©° `root@ubuntu` ê°€ ì‹¤ì œ root ê³„ì •ì…ë‹ˆë‹¤. 

{% highlight bash %}
$ su
ì•”í˜¸:
root@ubuntu: /home/ubuntu# exit
exit
{% endhighlight %}

## Nvidia Driver Installation 

ubuntu-driversë¡œ ë“œë¼ì´ë²„ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `ubuntu-drivers autoinstall` command ë¥¼ ì´ìš©í•˜ë©´ ì•Œì•„ì„œ ì ë‹¹í•œ ë“œë¼ì´ë²„ë¥¼ ê³¨ë¼ì„œ ì„¤ì¹˜ í•´ì¤ë‹ˆë‹¤, ë§Œì•½ íŠ¹ì • ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ í•´ë‹¹ ë°©ë²•ìœ¼ë¡œëŠ” ì„¤ì¹˜í•˜ì‹œë©´ ì•ˆë©ë‹ˆë‹¤.

repositoryë¥¼ ë¨¼ì € ì—…ë°ì´íŠ¸ í•´ì£¼ì‹œê³  autoinstall ì„ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤, ê·¸ í›„ reboot í•´ì£¼ì„¸ìš”.
{% highlight bash %}
$ sudo add-apt-repository ppa:graphics-drivers/ppa
$ sudo apt update
$ sudo ubuntu-drivers autoinstall
$ sudo reboot

# ë§Œì•½ ê¸°ì¡´ì— ì„¤ì¹˜ëœ ë“œë¼ì´ë²„ì™€ ì¶©ëŒë  ê²½ìš° ê´€ë ¨ í”„ë¡œê·¸ë¨ì„ ì‚­ì œí•©ë‹ˆë‹¤.
$ sudo apt --purge autoremove nvidia*  
{% endhighlight %}

íŠ¹ì • ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¶ì€ ê²½ìš° ì•„ë˜ì˜ ìˆœì„œë¡œ ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. 
{% highlight bash %}
$ systemctl isolate multi-user.target : DisplayManager ë¹„í™œì„±
$ sudo apt --purge autoremove nvidia* 
$ chmod +x ./NVIDIA-Linux-x86_64-xxx.xx.run
$ sudo sh ./NVIDIA-Linux-x86_64-xxx.xx.run
$ systemctl start graphical.target
$ sudo reboot
{% endhighlight %}

ì„¤ì¹˜ í™•ì¸ì€ `$ nvidia-settings` ë¡œ í™•ì¸í•©ë‹ˆë‹¤.

![nvidia-settings](/imgs/nvidia_settings.png)

## CUDA, cudnn Installation 

ë³¸ ê¸€ì—ì„œëŠ” AI ì™€ ê´€ë ¨ëœ setting ì— ëŒ€í•´ì„œëŠ” ì„œìˆ í•˜ì§€ ì•Šê³ , ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ì¶”í›„ ì„œìˆ í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. 

## Anaconda 3 Installation 

ì•„ë‚˜ì½˜ë‹¤ëŠ” ê°€ìƒí™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•œ python package ì…ë‹ˆë‹¤. ê° ìœ ì €ë³„ë¡œ ë§Œë“¤ì–´ë„ ë©ë‹ˆë‹¤. ë¨¼ì € ì•„ë‚˜ì½˜ë‹¤ í™ˆí˜ì´ì§€ì— ì ‘ì†í•´ì„œ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤. 

{% highlight bash %}
$ cd /home/ubuntu/Downloads
$ curl -O https://xxx 
$ bash Anaconda-xx 
$ source ~/.bashrc
(base) $ conda create -n mondeique python=3.7.9
(base) $ conda info --envs : ê°€ìƒí™˜ê²½ ëª©ë¡ í™•ì¸
(base) $ conda activate mondeique : ê°€ìƒí™˜ê²½ í™œì„±í™”
(mondeique) $ conda deactivate : ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
{% endhighlight %}

## ubuntu static IP setting 

ubuntu 18.04 ë¶€í„°ëŠ” interfaceê°€ ì•„ë‹Œ netplan ìœ¼ë¡œ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ì¼ë‹¨ ê°€ì¥ ë¨¼ì € `net-tools`ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

{% highlight bash %}
$ sudo apt-get install net-tools
{% endhighlight %}

ë‹¤ìŒìœ¼ë¡œ netplan file ì—ì„œ vim ìœ¼ë¡œ í•´ë‹¹ íŒŒì¼ì„ í¸ì§‘í•©ë‹ˆë‹¤,

{% highlight bash %}
$ sudo vim /etc/netplan/01-xxx-yml
{% endhighlight %}

í•´ë‹¹ ê²Œì´íŠ¸ì›¨ì´ì™€ DNS ì •ë³´ì˜ ê²½ìš° eren í˜¹ì€ victorì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”!

{% highlight bash %}
network:
	version: 2
	renderer: NetworkManager
		ethernets:
			(our network driver name):
				address:
					- (ì‚¬ìš©í•  ip)
				gateway4: (ê²Œì´íŠ¸ì›¨ì´)
				nameservers:
					addresses: [(DNS),(ë³´ì¡°DNS)]
{% endhighlight %}

{% highlight bash %}
$ sudo netplan apply
{% endhighlight %}

## openssh Installation + port setting 

ssh ì ‘ì†ì„ ìœ„í•´ openssh ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. 

{% highlight bash %}
$ sudo apt-get install openssh-server
{% endhighlight %}

ì´í›„ sshë¥¼ ìœ„í•œ port ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. (2222)

{% highlight bash %}
$ sudo vim /etc/ssh/sshd_config 
{% endhighlight %}

## ufw (ubuntu firewall) setting 

{% highlight bash %}
$ sudo vim /etc/ssh/sshd_config 
sudo ufw allow 2222/tcp ë° 7000:7999/t 
sudo ufw allow 443 ë° 80 (base)
sudo ufw deny 22/tcp (ê¸°ë³¸ í¬íŠ¸ì˜ ê²½ìš° í•´í‚¹ ìœ„í—˜ì´ ìˆì–´ì„œ í•´ì œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤)
{% endhighlight %}

## sudo adduser ë° admin ê¶Œí•œ ë¶€ì—¬

{% highlight bash %}
$ sudo adduser [ID]
$ sudo usermod -aG sudo [ID] : sudo ê¶Œí•œ ë¶€ì—¬ 
{% endhighlight %}

<br>

mondeiqueì˜ ê¸°ë³¸ì ì¸ ubuntu 18.04 setting ì— ëŒ€í•œ ì„¤ëª…ì„ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ê¸°ìˆ  ë¸”ë¡œê·¸ì˜ ë§ì€ postë¥¼ ê¸°ëŒ€í•´ì£¼ì„¸ìš”! ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ˜Š






